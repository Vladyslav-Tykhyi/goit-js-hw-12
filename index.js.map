{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst API_KEY = '47379272-a961c7172d29abe92af06f616';\n\nexport const params = {\n  key: API_KEY,\n  q: 'yellow+flower',\n};\n\nconst BASE_URL = `https://pixabay.com/api/`;\n\nexport async function fetchRequest(url = BASE_URL, customParams = {}) {\n  try {\n    const response = await axios.get(url, {\n      params: { ...params, ...customParams },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(\"Sorry, no results found for your query. Please try another search term.\");\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        id,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        largeImageURL,\n      }) => `\n        <li data-id=\"${id}\" class=\"list__item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">                          \n            <img class=\"item-img\" src=\"${webformatURL}\" alt=\"${tags}\"/>                  \n          </a>\n          <ul class=\"item-container-list\">\n              <li class=\"container-list\">\n                <h3 class=\"item-title\">Likes</h3>\n                <p class=\"item-content\">${likes}</p>\n              </li>\n              <li class=\"container-list\">\n                <h3 class=\"item-title\">Views</h3>\n                <p class=\"item-content\">${views}</p>\n              </li>\n              <li class=\"container-list\">\n                <h3 class=\"item-title\">Comments</h3>\n                <p class=\"item-content\">${comments}</p>\n              </li>\n              <li class=\"container-list\">\n                <h3 class=\"item-title\">Downloads</h3>\n                <p class=\"item-content\">${downloads}</p>\n              </li>\n            </ul>          \n        </li>\n    `\n    )\n    .join('');\n}\n\n\n\nexport const lightbox = new SimpleLightbox('.gallery a', {captionsData: 'alt',\n  captionDelay: 250,});","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { fetchRequest } from \"./js/pixabay-api\";\nimport { lightbox, createMarkup } from \"./js/render-functions\";\n\nconst input = document.querySelector(\".form-input\");\nconst btn = document.querySelector(\".btn-js\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nlet currentPage = 1;\nlet searchQuery = \"\";\nlet totalHits = 0;\n\nbtn.addEventListener(\"click\", searchClick);\nloadMoreBtn.addEventListener(\"click\", loadMore);\n\nloadMoreBtn.style.display = \"none\";\n\nfunction searchClick(event) {\n  event.preventDefault();\n  searchQuery = input.value.trim();\n  currentPage = 1;\n  gallery.innerHTML = \"\";\n  loadMoreBtn.style.display = \"none\";\n\n  if (!searchQuery) {\n    iziToast.show({\n      message: \"Input cannot be empty. Please enter a search term!\",\n    });\n    return;\n  }\n\n  fetchImages();\n}\n\nfunction loadMore() {\n  currentPage++;\n  fetchImages(true);\n}\n\nasync function fetchImages(isLoadMore = false) {\n  const params = {\n    q: searchQuery,\n    page: currentPage,\n    per_page: 40,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n  };\n\n  try {\n    const loaderHTML = '<span class=\"loader\"></span>';\n    if (!isLoadMore) {\n      gallery.innerHTML = loaderHTML;\n    } else {\n      loadMoreBtn.insertAdjacentHTML('afterend', loaderHTML);\n    }\n\n    const data = await fetchRequest(undefined, params);\n\n    const loader = document.querySelector(\".loader\");\n    if (loader) loader.remove();\n\n    if (data.hits.length === 0) {\n      if (!isLoadMore) {\n        throw new Error(\"Sorry, no results found for your query. Please try another search term.\");\n      }\n      iziToast.show({\n        message: \"No more results to load.\",\n      });\n      return;\n    }\n\n    totalHits = data.totalHits;\n\n    if (!isLoadMore) {\n      gallery.innerHTML = createMarkup(data.hits);\n    } else {\n      gallery.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n      smoothScroll();\n    }\n\n    lightbox.refresh();\n\n\n    const totalPages = Math.ceil(totalHits / params.per_page);\n    if (currentPage >= totalPages) {\n      loadMoreBtn.style.display = \"none\";\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.style.display = \"block\";\n    }\n  } catch (err) {\n    iziToast.show({\n      message: `${err.message}`,\n    });\n    gallery.innerHTML = \"\";\n  } finally {\n    const loader = document.querySelector(\".loader\");\n    if (loader) loader.remove();\n    input.value = \"\";\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}"],"names":["API_KEY","params","BASE_URL","fetchRequest","url","customParams","axios","createMarkup","arr","id","webformatURL","tags","likes","views","comments","downloads","largeImageURL","lightbox","SimpleLightbox","input","btn","gallery","loadMoreBtn","currentPage","searchQuery","totalHits","searchClick","loadMore","event","iziToast","fetchImages","isLoadMore","loaderHTML","data","loader","smoothScroll","totalPages","err","cardHeight"],"mappings":"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"}